# SVM 시스템

![SVM 시스템](/uploads/3bb93b090a1ad9baf2e30661eecf5712/output.gif)

# 운전 보조 시스템 SVM

> SVM(Surround View Monitor), 차량 주변 360도를 Top View로 확인하는 운전 보조 시스템

많은 운전자들이 자동차 주차 시 사각지대로 인해 어려움을 겪습니다. 이는 자동차의 크기가 클수록, 길이 좁아질수록 정도가 심해집니다.

이러한 문제점을 해결하고자 SVM(Surround View Monitor) 시스템은 차량의 전후좌우 4방향의 카메라 영상을 합성한 Top View 영상을 제공하여 주차 및 주행 시 사고를 줄이고 편리함을 제공합니다.


## 팀원
김기한, 김이랑, 김필재, 박주현(팀장), 임영선, 임진현

## 프로젝트 기간
2022.10.11 ~ 2022.11.21 (7주)

## 대표 기술스택
1. Language: Python(3.8.13)
2. Library : openCV (4.6.0)
3. IDE : Visual Studio Code (1.70.0)

## 주요기능
- 왜곡보정 및 이미지 정렬(화각 180°이상 카메라 이미지 보정)
- Top View 영상 이미지(2D) 제공
- 합성 경계 영역 처리
- 합성 이미지 밝기/색상 보정

## 세부기능
| 구분 | 기능                      | 설명                                                         |
| ---- | ------------------------- | ------------------------------------------------------------ |
| 1    | 왜곡 보정                 | 차량 카메라 영상의 압축되고 찌그러져 보이는 왜곡 현상 보정   |
| 2    | Top View 영상 이미지 제공 | 차량 카메라 영상 이미지의 옆에서 보는 시점을 위에서 내려다보는 시점으로 변환 |
| 3    | 합성 경계 영역 처리       | 시점변환까지 마친 차량 4방향의 영상 이미지를 하나의 이미지로 보일 수 있도록 정합 |
| 4    | 합성 이미지 색상 보정     | 4방향 합성 이미지가 더욱 자연스러운 하나의 이미지로 보일 수 있도록 블랜딩, 명도 조절 |
| 5    | 멀티 프로세싱             | FPS 최적화를 위해 기존 직렬 처리되어있던 하나의 프로세스를 5개의 프로세스로 나눠 병렬처리 |


## 프로젝트 파일 구조
```
📦7th_svm
├─ 📂camaraTool
├─ 📂data
│  ├─ 📂asset
│  ├─ 📂images
│  │  ├─ 📂extrinsic_images
│  │  ├─ 📂intrinsic_images
│  │  └─ 📂original_images
│  └─ 📂output
├─ 📂exec
├─ 📂extrinsicCalibration
├─ 📂intrinsicCalibration
├─ 📂imageManipulation
├─ 📜main.py
├─ 📜README.md
└─ 📜test.py
```



## 구현 과정

### 1. 왜곡보정
`화각 180°이상 카메라 이미지 보정 기능 (왜곡보정 및 이미지정렬)`

#### 이론 설명
`어안렌즈 이미지 왜곡보정(Camera Calibration)`
```
화각 180°이상 카메라 렌즈에서 찍은 영상은 상이 중앙에서 멀어질수록 압축되고 휘어지는 왜곡현상이 발생합니다. 
이 왜곡을 보정하기 위해 카메라 캘리브레이션 작업을 진행해 이미지를 보정했습니다. 

이 때, OpenCV 라이브러리와 체스보드를 활용해 왜곡계수를 구했고, 
왜곡행렬의 역행렬을 통해 반대로 이미지에 굴곡을 형성하여 왜곡을 보정했습니다. 
```

#### 처리 결과
![image](uploads/7ea32b98c79d28d78c860a968b1869d6/image.png)

### 2. 시점변환
### 3. 합성 / 색 보정
### 4. FPS 최적화
